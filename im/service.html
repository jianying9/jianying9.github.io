<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="renderer" content="webkit|ie-comp|ie-stand">
        <meta http-equiv="content-type" content="text/html;charset=utf-8">
        <title>im-service</title>
        <script src="../libs/require/require.js"></script>
    </head>
    <body class="global_background">
        <script>
//            var v = new Date().getTime();
            var v = 60;
            require.config({
                packages: [
                    {
                        name: 'jquery',
                        location: '../libs/jquery',
                        main: 'jquery-1.9.1'
                    },
                    {
                        name: 'text',
                        location: '../libs/require',
                        main: 'text'
                    },
                    {
                        name: 'yy',
                        location: '../libs/yy',
                        main: 'yy'
                    },
                    {
                        name: 'service-login',
                        location: './module/service-login',
                        main: 'service-login'
                    },
                    {
                        name: 'service-home',
                        location: './module/service-home',
                        main: 'service-home'
                    }
                ],
                paths: {
                    'crypto.core': '../libs/crypto/components/core',
                    'crypto.md5': '../libs/crypto/components/md5',
                    'jquery.mousewheel': '../libs/jquery/mousewheel/jquery.mousewheel-3.0.6',
                    'jquery.datepicker': '../libs/jquery/datepicker/jquery-ui-1.10.3.datepicker'
                },
                shim: {
                    'crypto.core': {
                        exports: 'CryptoJS'
                    },
                    'crypto.md5': {
                        deps: ['crypto.core'],
                        exports: 'CryptoJS.MD5'
                    },
                    'jquery.mousewheel': {
                        deps: ['jquery'],
                        exports: 'jQuery.fn.mousewheel'
                    },
                    'jquery.datepicker': {
                        deps: ['jquery'],
                        exports: 'jQuery.fn.datepicker',
                        init: function() {
                            //加载css
                            var link = document.createElement("link");
                            link.type = "text/css";
                            link.rel = "stylesheet";
                            link.href = '../libs/jquery/datepicker/stylesheets/jquery-ui-1.10.3.datepicker.css';
                            document.getElementsByTagName("head")[0].appendChild(link);
                        }
                    }
                },
                urlArgs: 'v=' + v
            });
            require(['yy', 'yy/module'], function(yy, module) {
                //加载css
                var sinaLink = document.createElement("link");
                sinaLink.type = "text/css";
                sinaLink.rel = "stylesheet";
                sinaLink.href = 'stylesheets/im.css' + '?v=' + v;
                document.getElementsByTagName("head")[0].appendChild(sinaLink);

                var yyLink = document.createElement("link");
                yyLink.type = "text/css";
                yyLink.rel = "stylesheet";
                yyLink.href = '../libs/yy/stylesheets/yy.css' + '?v=' + v;
                document.getElementsByTagName("head")[0].appendChild(yyLink);
                //加载模块
                module.loadModule('', 'service-login', function() {
                });
                yy.setConfig({
                    httpServer: 'http://192.168.59.99:8090/im-server/service.io',
                    webSocketServer: 'ws://192.168.59.99:8090/im-server/service.io'
                });
            });
        </script>
    </body>
</html>